<h1>Editar Usuário</h1>

<%= form_for [:admin, @user] do |f| %>
  <div>
    <%= f.label :name, "Nome" %>
    <%= f.text_field :name %>
  </div>
  <div>
    <%= f.label :email, "Email" %>
    <%= f.email_field :email %>
  </div>
  <div>
    <%= f.label :role, "Papel" %>
    <%= f.select :role, options_for_select([['Cliente', 'cliente'], ['Fornecedor', 'supplier'], ['Admin', 'admin']], @user.role) %>
  </div>
  <div>
    <%= f.label :cnpj, "CNPJ" %>
    <%= f.text_field :cnpj %>
  </div>
  <div>
    <%= f.label :responsible, "Responsável" %>
    <%= f.text_field :responsible %>
  </div>
  <div>
    <%= f.label :address, "Endereço" %>
    <%= f.text_area :address %>
  </div>
  <div>
    <%= f.label :logo, "Logo" %>
    <%= f.text_field :logo %>
  </div>
  <div>
    <%= f.label :commission_percentage, "Percentual de Comissão (%)" %>
    <%= f.number_field :commission_percentage, step: 0.01 %>
  </div>
  <div>
    <%= f.label :phone, "Telefone" %>
    <%= f.text_field :phone %>
  </div>
  <div>
    <%= f.label :password, "Senha" %>
    <%= f.password_field :password %>
    <small>Deixe em branco se não quiser alterar a senha</small>
  </div>
  <div>
    <%= f.label :password_confirmation, "Confirmação de Senha" %>
    <%= f.password_field :password_confirmation %>
  </div>

  <% if @user.role == "supplier" %>
    <div>
      <%= f.label :category_ids, "Categorias" %>
      <%= f.collection_select :category_ids, Category.all, :id, :name,
            { prompt: "Selecione as categorias", selected: @user.category_ids },
            { multiple: true } %>
    </div>
  <% end %>

  <div>
    <%= f.submit "Atualizar Usuário" %>
  </div>
<% end %>

<%= link_to 'Voltar', admin_users_path %>
